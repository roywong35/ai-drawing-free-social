<div class="max-w-2xl mx-auto pt-4">
  <div class="bg-white dark:bg-black border-gray-200 dark:[border-color:var(--color-border)]">
    <div class="px-4 py-3 border-b border-gray-200 dark:[border-color:var(--color-border)]">
      <h1 class="text-xl font-bold dark:[color:var(--color-text)]">Recommended Users</h1>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="divide-y divide-gray-200 dark:divide-gray-800">
      <div *ngFor="let i of [1,2,3,4,5]" class="p-4">
        <div class="animate-pulse flex">
          <div class="w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-800"></div>
          <div class="ml-3 flex-grow">
            <div class="flex items-start justify-between">
              <div>
                <div class="h-4 bg-gray-200 dark:bg-gray-800 rounded w-24"></div>
                <div class="h-3 bg-gray-200 dark:bg-gray-800 rounded w-20 mt-1"></div>
              </div>
              <div class="w-20 h-7 bg-gray-200 dark:bg-gray-800 rounded-full"></div>
            </div>
            <div class="h-3 bg-gray-200 dark:bg-gray-800 rounded w-32 mt-2"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- User List -->
    <div *ngIf="!isLoading" class="divide-y divide-gray-200 dark:divide-gray-800">
      <div *ngFor="let user of users" class="p-4 hover:bg-gray-100 dark:hover:[background-color:var(--color-surface-hover)] transition-colors cursor-pointer"
           (click)="navigateToProfile(user.handle)">
        <div class="flex">
          <img [src]="user.profile_picture || defaultAvatar" 
               [alt]="user.username + ' avatar'" 
               class="w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-800 hover:opacity-80 transition-opacity"
               (mouseenter)="onUserHover($event, user)"
               (mouseleave)="onUserHoverLeave()">
          
          <div class="ml-3 flex-grow">
            <!-- Top row: Username, handle and follow button -->
            <div class="flex items-start justify-between">
              <div>
                <div class="font-bold text-gray-900 dark:[color:var(--color-text)] hover:underline text-[15px] mt-[-1px]">
                  <span class="username-text"
                        (mouseenter)="onUserHover($event, user)"
                        (mouseleave)="onUserHoverLeave()">{{ user.username }}</span>
                </div>
                <div class="text-gray-500 dark:[color:var(--color-text-secondary)] hover:underline text-[15px] mt-[-1px]">
                  <span class="handle-text"
                        (mouseenter)="onUserHover($event, user)"
                        (mouseleave)="onUserHoverLeave()">{{'@'}}{{ user.handle }}</span>
                </div>
              </div>
              
              <!-- Follow Button -->
              <button 
                *ngIf="shouldShowFollowButton(user)"
                (click)="followUser(user, $event)"
                (mouseenter)="onFollowButtonHover(user, true)"
                (mouseleave)="onFollowButtonHover(user, false)"
                [disabled]="user.isFollowLoading"
                class="follow-button ml-4"
                [class.following]="user.is_following">
                <span>
                  <span *ngIf="user.is_following">Following</span>
                  <span *ngIf="!user.is_following">Follow</span>
                </span>
              </button>
            </div>
            
            <!-- Bio row: Full width under everything -->
            <div *ngIf="user.bio" 
                 class="text-gray-900 dark:[color:var(--color-text-secondary)] text-[15px]">{{ user.bio }}</div>
          </div>
        </div>
      </div>

      <!-- Empty State -->
      <div *ngIf="users.length === 0" class="p-8 text-center text-gray-500 dark:[color:var(--color-text-secondary)]">
        No users found
      </div>
    </div>

    <!-- Load More Indicator -->
    <div *ngIf="isLoadingMore" class="flex items-center justify-center py-8">
      <div class="animate-spin rounded-full h-6 w-6 border-2 border-blue-500 border-t-transparent"></div>
    </div>

    <!-- End of Results Indicator -->
    <div *ngIf="!hasMore && users.length > 0" class="p-4 text-center">
      <p class="text-sm text-gray-500 dark:[color:var(--color-text-secondary)]">You've reached the end of recommendations</p>
    </div>
  </div>
</div> 